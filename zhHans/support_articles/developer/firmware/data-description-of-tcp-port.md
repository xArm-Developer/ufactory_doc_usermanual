# TCP端口数据说明

我们使用端口 30000、30001、30002、30003 上报TCP 数据



## 1.端口30000

__要求固件版本：V2.1.0+__

__频率：250HZ(力矩传感器200HZ)__

| 参数                                                     | 类型 | 字节数  | 长度 | 说明                       |
| :------------------------------------------------------- | :--- | :------ | :--- | :------------------------- |
| 字节数                                                   | U32  | 1-4     | 4    |                            |
| 时间戳                                                   | U64  | 5-12    | 8    | μs                         |
| 运动状态和模式                                           | U8   | 13      | 1    |                            |
| 指令缓存数                                               | U16  | 14-15   | 2    |                            |
| 预留（用于系统信息）                                     | U16  | 16-32   | 17   |                            |
| 目标关节位置                                             | FP32 | 33-60   | 28   | rad                        |
| 目标关节速度                                             | FP32 | 61-88   | 28   | rad/s                      |
| 目标关节加速度                                           | FP32 | 89-116  | 28   | rad/s²                     |
| 实际关节位置                                             | FP32 | 117-144 | 28   | rad                        |
| 实际关节速度                                             | FP32 | 145-172 | 28   | rad/s                      |
| 实际关节加速度                                           | FP32 | 173-200 | 28   | rad/s²                     |
| 实际关节电流                                             | FP32 | 201-228 | 28   | A                          |
| 估算关节扭矩                                             | FP32 | 229-256 | 28   | N·m                        |
| 预留（用于关节信息）                                     | FP32 | 257-424 | 168  |                            |
| 目标TCP位置与姿态                                        | FP32 | 425-448 | 24   | mm & rad                   |
| 目标TCP速度                                              | FP32 | 449-472 | 24   | mm/s & rad/s               |
| 实际TCP位置与姿态                                        | FP32 | 473-496 | 24   | mm &rad[x,y,z,rx,ry,rz]    |
| 实际TCP速度                                              | FP32 | 497-520 | 24   | mm/s & rad/s               |
| 估算TCP扭矩                                              | FP32 | 521-544 | 24   | N & N·m                    |
| 预留（用于TCP信息）                                      | FP32 | 545-688 | 144  |                            |
| 六维力矩传感器原始数据                                   | FP32 | 689-712 | 24   | N & N·m[Fx,Fy,Fz,Tx,Ty,Tz] |
| 经过滤波、负载和偏置补偿的末端六维力矩传感器的外力检测值 | FP32 | 713-736 | 24   | N & N·m[Fx,Fy,Fz,Tx,Ty,Tz] |
| 预留（用于外部设备）                                     | FP32 | 737-784 | 48   |                            |

## 2. 端口30001

__要求固件版本：V1.8.0+__

__频率：5HZ__

| 参数                       | 类型 | 字节数  | 长度 | 说明             |
| :------------------------- | :--- | :------ | :--- | :--------------- |
| 与30003端口一致            | -    | 1-87    | -    |                  |
| 抱闸状态                   | U8   | 88      | 1    |                  |
| 使能状态                   | U8   | 89      | 1    | 0:未使能  1:使能 |
| 错误码                     | U8   | 90      | 1    |                  |
| 警告码                     | U8   | 91      | 1    |                  |
| TCP偏移量                  | FP32 | 92-115  | 24   |                  |
| TCP负载                    | FP32 | 116-131 | 16   |                  |
| 碰撞检测灵敏度             | U8   | 132     | 1    |                  |
| 示教灵敏度                 | U8   | 133     | 1    |                  |
| 安装方式（相对于基坐标系） | FP32 | 134-145 | 12   | 重力方向(x,y,z)  |

## 3.端口30002

__要求固件版本：V1.8.0+__

__频率：5HZ__

| 参数                                | 类型  | 字节数      | 长度 | 说明                                                                 |
|-----------------------------------|-------|-------------|------|----------------------------------------------------------------------|
| 同30001一致                        | -     | 1-145       | -    |                                                                      |
| 机械臂类型                         | U8    | 146         | 1    | 5/6/7                                                                |
| 关节轴数                            | U8    | 147         | 1    | 5/6/7                                                                |
| 通信 MASTER ID                    | U8    | 148         | 1    | 0xAA 固定                                                            |
| 通信 SLAVE ID                     | U8    | 149         | 1    | 0x55 固定                                                            |
| -                                  | -     | 150         | 1    | 预留                                                                 |
| -                                  | -     | 151         | 1    | 预留                                                                 |
| 固件版本号                         | -     | 152-181     | 30   |                                                                      |
| Tcp 加速度                         | FP32  | 182-201     | 20   | 当前设定的笛卡尔加加速度(mm/s³)，可设置的笛卡尔最小加速度(mm/s²)，可设置的笛卡尔最大加速度(mm/s²)，笛卡尔最小速度(mm/s)，笛卡尔最大速度(mm/s) |
| 关节加速度                         | FP32  | 202-221     | 20   | 当前设定的关节加加速度(radian/s³)，可设置的关节最小加速度(radian/s²)，可设置的关节最大加速度(radian/s²)，关节最小速度(radian/s)，关节最大速度(radian/s) |
| 姿态旋转加加速度和姿态旋转加速度    | FP32  | 222-229     | 8    | 用户不可自己设置                                                     |
| 关节伺服错误码                     | U8    | 230-243     | 14   |                                                                      |
| 末端IO错误码                       | U8    | 244-245     | 2    |                                                                      |
| 关节摄氏温度                        | int8  | 246-252     | 7    |                                                                      |
| 目标TCP速度                        | FP32  | 253-256     | 4    | mm/s                                                                 |
| 目标关节速度                       | FP32  | 257-284     | 28   | rad/s                                                                |
| 当前指令计数器的值                  | U32   | 285-288     | 4    |                                                                      |
| 用户坐标                           | FP32  | 289-312     | 24   | mm & rad[x,y,z,roll,pitch,yaw]                                        |
| 可配置控制器IO输出                  | U8    | 313         | 1    | 机械臂停止状态清空控制器IO输出                                        |
| 可配置末端IO输出                   | U8    | 314         | 1    | 机械臂停止状态清空末端工具IO输出                                      |
| 虚拟控制开关量                     | U8    | 315         | 1    |                                                                      |
| 自碰撞检测开关量                    | U8    | 316         | 1    |                                                                      |
| 自碰撞检测末端工具类型编号          | U8    | 317         | 1    |                                                                      |
| 自碰撞末端工具模型参数              | FP32  | 318-341     | 24   | mm [x,y,z]                                                           |
| 关节电压                           | U16   | 342-355     | 14   | 数值已做 *100 处理                                                   |
| 关节电流                           | FP32  | 356-383     | 28   | 单位：安培（A）                                                      |
| GPIO模块状态                       | U8    | 384         | 1    | 0 ：正常 ；3 ：爪子有错误信息； 6 ：通信失败                         |
| GPIO模块的错误代码                 | U8    | 385         | 1    | 0：正常 ； 非 0：错误代码                                            |
| 数字输入功能IO状态                 | U16   | 386-387     | 2    |                                                                      |
| 数字输入配置IO状态                 | U16   | 388-389     | 2    |                                                                      |
| 数字输出功能IO状态                 | U16   | 390-391     | 2    |                                                                      |
| 数字输出配置IO状态                 | U16   | 392-393     | 2    |                                                                      |
| 模拟输入1                          | U16   | 394-395     | 2    |                                                                      |
| 模拟输入2                          | U16   | 396-397     | 2    |                                                                      |
| 模拟输出1                          | U16   | 398-399     | 2    |                                                                      |
| 模拟输出2                          | U16   | 400-401     | 2    |                                                                      |
| 数字输入 CI0~7 配置信息            | U8    | 402-409     | 8    |                                                                      |
| 数字输出 CO0~7 配置信息            | U8    | 410-417     | 8    |                                                                      |
| 数字输入 DI0~7 配置信息            | U8    | 418-425     | 8    |                                                                      |
| 数字输出 DO0~7 配置信息            | U8    | 426-433     | 8    |                                                                      |
| 经过滤波、负载和偏置补偿的末端六维力矩传感器的外力检测值 | FP32  | 434-457     | 24   | N & N·m[Fx,Fy,Fz,Tx,Ty,Tz]                                           |
| 六维力矩传感器的原始数据           | FP32  | 458-481     | 24   | N & N·m[Fx,Fy,Fz,Tx,Ty,Tz]                                           |
| 自动辨识程序完成进度               | U8    | 482         | 1    | 百分比                                                               |
| 当前末端姿态（轴角表示法）          | FP32  | 483-494     | 12   | Rx,Ry,Rz                                                             |
| 安全设置                           | U8    | 495         | 1    | bit0: 缩减模式 bit1: 安全边界 bit2: 电流/扭矩报告 bit3:近似解 bit4: 笛卡尔运动速度连续 |
| 缩减模式                           | U8    | 496         | 1    | 0:关闭  1:开启                                                     |
| 安全边界                           | Int16 | 497-508     | 12   | mm[x_max,x_min,y_max,y_min,z_max,z_min]                              |
| 最大TCP速度                        | FP32  | 509-512     | 4    | mm/s                                                                 |
| 最大关节速度                       | FP32  | 513-516     | 4    | rad/s                                                                |





### 4. 端口30003

#### 要求固件版本: V1.8.0+

#### 频率: 100HZ



| 参数                                                        | 类型 | 字节数  | 长度 | 说明                       |
| :---------------------------------------------------------- | :--- | :------ | :--- | :------------------------- |
| 字节数                                                      | U32  | 1-4     | 4    |                            |
| 运动状态和模式                                              | U8   | 5       |      |                            |
| 指令缓存数                                                  | U16  | 6-7     | 2    |                            |
| 实际关节角度                                                | FP32 | 8-35    | 28   |                            |
| 实际位置与姿态                                              | FP32 | 36-59   | 24   |                            |
| 关节力矩                                                    | FP32 | 60-87   | 28   |                            |
| 经过滤波、负载和偏置补偿的末端六维力矩传感器的外力检测值 | FP32 | 88-111  | 24   | N & N·m[Fx,Fy,Fz,Tx,Ty,Tz] |
| 末端六维力矩传感器的原始读数                             | FP32 | 112-135 | 24   | N & N·m[Fx,Fy,Fz,Tx,Ty,Tz] |
